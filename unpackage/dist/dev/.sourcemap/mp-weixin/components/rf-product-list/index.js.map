{"version":3,"sources":["webpack:///D:/my_system/workspace/TinyShop-UniApp/components/rf-product-list/index.vue?0c76","webpack:///D:/my_system/workspace/TinyShop-UniApp/components/rf-product-list/index.vue?d4aa","webpack:///D:/my_system/workspace/TinyShop-UniApp/components/rf-product-list/index.vue?bc85","webpack:///D:/my_system/workspace/TinyShop-UniApp/components/rf-product-list/index.vue?d02a","uni-app:///components/rf-product-list/index.vue"],"names":["name","props","list","type","default","isList","bottom","components","rfAttrContent","data","specClass","moneySymbol","productDetail","filters","filterTotalSales","val","filterTagName","methods","navTo","route","getProductDetail","get","id","then","r","toggleSpec","setTimeout","stopPrevent","hideSpec","handleCartItemCreate","post","sku_id","num"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACiL;AACjL,gBAAgB,sLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACrDA;AAAA;AAAA;AAAA;AAAwqB,CAAgB,4pBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACoH5rB;AAEA;AACA;AAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,gBACA;EACAA;EACAC;IACAC;MACAC;MACAC;QACA;MACA;IACA;IACA;IACAC;MACAF;MACAC;IACA;IACA;IACAE;MACAH;MACAC;IACA;EACA;EACAG;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;QACAC;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;IACA;EACA;EACAC,yCACA;IACA;IACAC;MACA;QAAAC;MAAA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,YACAC;kBACAC;gBACA,GACAC;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;4BAAA;4BAAA,OACAC;0BAAA;4BAAA;4BACA;4BACA;0BAAA;0BAAA;4BAAA;wBAAA;sBAAA;oBAAA;kBAAA,CACA;kBAAA;oBAAA;kBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IACA;IACAC;MAAA;MACA;MACA;QACA;QACA;UACA;UACA;QACA;QACA;UACA;UACA;QACA;UACA;UACA;UACA;UACAhB;UACAA;UACA,IACA,6DACA,6DACA,6DACA,sBACA;YACAP;UACA;YACAA;UACA;UACAA;UACA;QACA;QACAwB;UACA;QACA;MACA;QACA;MACA;IACA;IACAC;IACAC;MAAA;MACA;MACAF;QACA;MACA;IACA;IACA;IACAG;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA,aACAC;kBACAC;kBACAC;gBACA,GACAT;kBAAA;oBAAA;sBAAA;wBAAA;0BAAA;0BAAA,OACA;4BAAA;8BAAA;gCAAA;kCAAA;oCAAA;sCACA;oCAAA;oCAAA;sCAAA;kCAAA;gCAAA;8BAAA;4BAAA,CACA;4BAAA;8BAAA;4BAAA;0BAAA;wBAAA;0BACA;wBAAA;wBAAA;0BAAA;sBAAA;oBAAA;kBAAA;gBAAA,CACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;EAAA;AAEA;AAAA,4B","file":"components/rf-product-list/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=dc735466&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/rf-product-list/index.vue\"\nexport default component.exports","export * from \"-!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=dc735466&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.list, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n    var f0 =\n      (index + 1) % 2 !== 0 || _vm.isList ? _vm._f(\"filterTagName\")(item) : null\n    var f1 =\n      ((index + 1) % 2 !== 0 || _vm.isList) && item\n        ? _vm._f(\"filterTotalSales\")(item.total_sales)\n        : null\n    return {\n      $orig: $orig,\n      f0: f0,\n      f1: f1,\n    }\n  })\n  var l1 = !_vm.isList\n    ? _vm.__map(_vm.list, function (item, index) {\n        var $orig = _vm.__get_orig(item)\n        var f2 =\n          (index + 1) % 2 === 0 &&\n          (item.shipping_type === \"1\" ||\n            item.is_virtual === \"1\" ||\n            item.commissionRate ||\n            item.is_open_presell === \"1\")\n            ? _vm._f(\"filterTagName\")(item)\n            : null\n        var f3 =\n          (index + 1) % 2 === 0 && item\n            ? _vm._f(\"filterTotalSales\")(item.total_sales)\n            : null\n        return {\n          $orig: $orig,\n          f2: f2,\n          f3: f3,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l1: l1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../开发软件/HBuilder/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"rf-product-list\">\n\t\t<view class=\"rf-product-list-container\">\n\t\t\t<block v-for=\"(item, index) in list\" :key=\"index\">\n\t\t\t\t<!--商品列表-->\n\t\t\t\t<view\n\t\t\t\t\tv-if=\"(index + 1) % 2 !== 0 || isList\"\n\t\t\t\t\tclass=\"rf-product-item\"\n\t\t\t\t\t@tap.stop=\"navTo(`/pages/product/product?id=${item.id}`)\"\n\t\t\t\t\t:class=\"[isList ? 'rf-product-flex-list' : '']\"\n\t\t\t\t\thover-class=\"hover\"\n\t\t\t\t\t:hover-start-time=\"150\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"rf-product-image-wrapper\">\n\t\t\t\t\t\t<image :src=\"item.picture\" mode=\"widthFix\" :preview=\"false\" :class=\"[isList?'rf-product-list-img':'rf-product-img']\" ></image>\n\t\t\t\t\t\t<text class=\"sketch in1line\">{{ item.sketch }}</text>\n\t\t\t\t\t\t<view class=\"triangle-wrapper\">\n\t\t\t\t\t\t\t<image class=\"triangle-tag\" :src=\"item | filterTagName\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"rf-pro-content\">\n\t\t\t\t\t\t<view class=\"rf-pro-tit\">{{ item.name }}</view>\n\t\t\t\t\t\t<view v-if=\"item\">\n\t\t\t\t\t\t\t<view class=\"rf-pro-price\">\n\t\t\t\t\t\t\t\t<text class=\"rf-sale-price\" :class=\"'text-'+themeColor.name\">{{ moneySymbol }}{{ item.price }}</text>\n\t\t\t\t\t\t\t\t<text class=\"rf-factory-price\" v-if=\"item.market_price > item.price\">{{ moneySymbol }}{{ item.market_price }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"rf-pro-pay\">\n\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t><text :class=\"'text-'+themeColor.name\">{{\n\t\t\t\t\t\t\t\t\t\titem.total_sales | filterTotalSales\n\t\t\t\t\t\t\t\t\t}}</text>\n\t\t\t\t\t\t\t\t\t人付款</text\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t@tap.stop=\"toggleSpec(item)\"\n\t\t\t\t\t\t\t\t\tclass=\"iconfont icongouwuche2\"\n\t\t\t\t\t\t\t\t\t:class=\"'text-'+themeColor.name\"\n\t\t\t\t\t\t\t\t></text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<!--商品列表-->\n\t\t\t</block>\n\t\t</view>\n\t\t<view class=\"rf-product-list-container\" v-if=\"!isList\">\n\t\t\t<block v-for=\"(item, index) in list\" :key=\"index\">\n\t\t\t\t<!--商品列表-->\n\t\t\t\t<view\n\t\t\t\t\tv-if=\"(index + 1) % 2 === 0\"\n\t\t\t\t\tclass=\"rf-product-item\"\n\t\t\t\t\t@tap.stop=\"navTo(`/pages/product/product?id=${item.id}`)\"\n\t\t\t\t\t:class=\"[isList ? 'rf-product-flex-list' : '']\"\n\t\t\t\t\thover-class=\"hover\"\n\t\t\t\t\t:hover-start-time=\"150\"\n\t\t\t\t>\n\t\t\t\t\t<view class=\"rf-product-image-wrapper\">\n\t\t\t\t\t\t<image :src=\"item.picture\" mode=\"widthFix\" :preview=\"false\" :class=\"[isList?'rf-product-list-img':'rf-product-img']\" ></image>\n\t\t\t\t\t\t<text class=\"sketch in1line\">{{ item.sketch }}</text>\n\t\t\t\t\t\t<view class=\"triangle-wrapper\" v-if=\"item.shipping_type === '1' || item.is_virtual === '1' || item.commissionRate || item.is_open_presell === '1'\">\n\t\t\t\t\t\t\t<image class=\"triangle-tag\" :src=\"item | filterTagName\"></image>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"rf-pro-content\">\n\t\t\t\t\t\t<view class=\"rf-pro-tit\">{{ item.name }}</view>\n\t\t\t\t\t\t<view v-if=\"item\">\n\t\t\t\t\t\t\t<view class=\"rf-pro-price\">\n\t\t\t\t\t\t\t\t<text class=\"rf-sale-price\" :class=\"'text-'+themeColor.name\">{{ moneySymbol }}{{ item.price }}</text>\n\t\t\t\t\t\t\t\t<text class=\"rf-factory-price\" v-if=\"item.market_price > item.price\">{{ moneySymbol }}{{ item.market_price }}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t\t<view class=\"rf-pro-pay\">\n\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t><text :class=\"'text-'+themeColor.name\">{{\n\t\t\t\t\t\t\t\t\t\titem.total_sales | filterTotalSales\n\t\t\t\t\t\t\t\t\t}}</text>\n\t\t\t\t\t\t\t\t\t付款</text\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\t\t@tap.stop=\"toggleSpec(item)\"\n\t\t\t\t\t\t\t\t\t:class=\"'text-'+themeColor.name\"\n\t\t\t\t\t\t\t\t\tclass=\"iconfont icongouwuche2\"\n\t\t\t\t\t\t\t\t></text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<!--商品列表-->\n\t\t\t</block>\n\t\t</view>\n\t\t<!-- 规格-模态层弹窗 -->\n\t\t<view\n\t\t\tclass=\"popup spec show\"\n\t\t\tv-if=\"specClass === 'show'\"\n\t\t\t@touchmove.stop.prevent=\"stopPrevent\"\n\t\t\t@tap=\"hideSpec\"\n\t\t>\n\t\t\t<!-- 遮罩层 -->\n\t\t\t<view class=\"mask\" @tap=\"hideSpec\"></view>\n\t\t\t<view class=\"layer\" :style=\"{bottom: bottom ? `${bottom}upx` : 0}\" @tap.stop=\"stopPrevent\">\n\t\t\t\t<rf-attr-content\n\t\t\t\t\t:product=\"productDetail\"\n\t\t\t\t\t@toggle=\"toggleSpec\"\n\t\t\t\t\t:showBuyBtn=\"true\"\n\t\t\t\t></rf-attr-content>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n<script>\n/**\n * @des 商品列表\n *\n * @author stav stavyan@qq.com\n * @date 2020-05-15 10:49\n */\nimport { productDetail, cartItemCount, cartItemCreate } from '@/api/product';\nimport rfAttrContent from '@/components/rf-attr-content';\nimport $mAssetsPath from '@/config/assets.config';\nimport { mapMutations } from 'vuex';\nexport default {\n\tname: 'rfProductList',\n\tprops: {\n\t\tlist: {\n\t\t\ttype: Array,\n\t\t\tdefault() {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\t\t// 是否以列表展示 | 列表或大图\n\t\tisList: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\t// 是否以列表展示 | 列表或大图\n\t\tbottom: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t}\n\t},\n\tcomponents: {\n\t\trfAttrContent\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tspecClass: 'none',\n      moneySymbol: this.moneySymbol,\n\t\t\tproductDetail: {}\n\t\t};\n\t},\n\tfilters: {\n\t\tfilterTotalSales(val) {\n\t\t\tif (val > 10000) {\n\t\t\t\tval = `${(val / 10000).toFixed(2)}w`;\n\t\t\t}\n\t\t\treturn val;\n\t\t},\n\t\tfilterTagName(val) {\n\t\t\tif (val.commissionRate) {\n\t\t\t\t// 分销商品\n\t\t\t\treturn $mAssetsPath.distribution;\n\t\t\t} else if (val.is_virtual === '1') {\n\t\t\t\t// 虚拟产品\n\t\t\t\treturn $mAssetsPath.virtual;\n\t\t\t} else if (val.shipping_type === '1') {\n\t\t\t\t// 包邮产品\n\t\t\t\treturn $mAssetsPath.pinkage;\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n    ...mapMutations(['setCartNum']),\n\t\t// 跳转详情\n\t\tnavTo(route) {\n\t\t\tthis.$mRouter.push({ route });\n\t\t},\n\t\t// 获取产品详情\n\t\tasync getProductDetail(row) {\n\t\t\tawait this.$http\n\t\t\t\t.get(`${productDetail}`, {\n\t\t\t\t\tid: row.id\n\t\t\t\t})\n\t\t\t\t.then(async r => {\n\t\t\t\t\tthis.productDetail = await r.data;\n\t\t\t\t\tthis.productDetail.sku_name = row.sku_name;\n\t\t\t\t\tthis.specClass = 'show';\n\t\t\t\t});\n\t\t},\n\t\t// 规格弹窗开关\n\t\ttoggleSpec(row) {\n\t\t\tif (parseInt(row.status, 10) === 0) return;\n\t\t\tif (this.specClass === 'show') {\n\t\t\t\tthis.specClass = 'hide';\n\t\t\t\tif (row.stock === 0) {\n\t\t\t\t\tthis.$mHelper.toast('库存不足');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (row.type.toString() === '1') {\n\t\t\t\t\t// 加入购物车\n\t\t\t\t\tthis.handleCartItemCreate(row.skuId, row.cartCount);\n\t\t\t\t} else if (row.type.toString() === '2') {\n\t\t\t\t\t// 立即购买\n\t\t\t\t\tconst list = {};\n\t\t\t\t\tconst data = {};\n\t\t\t\t\tdata.sku_id = row.skuId;\n\t\t\t\t\tdata.num = row.cartCount;\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.productDetail.point_exchange_type.toString() === '2' ||\n\t\t\t\t\t\tthis.productDetail.point_exchange_type.toString() === '4' ||\n\t\t\t\t\t\t(this.productDetail.point_exchange_type.toString() === '3' &&\n\t\t\t\t\t\t\tthis.isPointExchange)\n\t\t\t\t\t) {\n\t\t\t\t\t\tlist.type = 'point_exchange';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlist.type = 'buy_now';\n\t\t\t\t\t}\n\t\t\t\t\tlist.data = JSON.stringify(data);\n\t\t\t\t\tthis.navTo(`/pages/order/create/order?data=${JSON.stringify(list)}`);\n\t\t\t\t}\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.specClass = 'none';\n\t\t\t\t}, 250);\n\t\t\t} else if (this.specClass === 'none') {\n\t\t\t\tthis.getProductDetail(row);\n\t\t\t}\n\t\t},\n\t\tstopPrevent() {},\n\t\thideSpec() {\n\t\t\tthis.specClass = 'hide';\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.specClass = 'none';\n\t\t\t}, 250);\n\t\t},\n\t\t// 添加商品至购物车\n\t\tasync handleCartItemCreate(skuId, cartCount) {\n\t\t\tawait this.$http\n\t\t\t\t.post(`${cartItemCreate}`, {\n\t\t\t\t\tsku_id: skuId,\n\t\t\t\t\tnum: cartCount\n\t\t\t\t})\n\t\t\t\t.then(async () => {\n\t\t\t\t\tawait this.$http.get(`${cartItemCount}`).then(async r => {\n\t\t\t\t\t\tthis.setCartNum(r.data);\n\t\t\t\t\t});\n\t\t\t\t\tthis.$mHelper.toast('添加购物车成功');\n\t\t\t\t});\n\t\t}\n\t}\n};\n</script>\n"],"sourceRoot":""}