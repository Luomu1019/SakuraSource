<view class="my-coupon"><view><view class="tabr" style="{{'top:'+(headerTop)+';'}}"><view data-event-opts="{{[['tap',[['switchType',['valid',1]]]]]}}" class="{{[typeClass=='valid'?'text-'+themeColor.name+' on':'']}}" bindtap="__e">可用<block wx:if="{{state===1}}"><text>{{"("+$root.g0+")"}}</text></block></view><view data-event-opts="{{[['tap',[['switchType',['used',2]]]]]}}" class="{{[typeClass=='used'?'text-'+themeColor.name+' on':'']}}" bindtap="__e">已使用<block wx:if="{{state===2}}"><text>{{"("+$root.g1+")"}}</text></block></view><view data-event-opts="{{[['tap',[['switchType',['invalid',3]]]]]}}" class="{{[typeClass=='invalid'?'text-'+themeColor.name+' on':'']}}" bindtap="__e">已失效<block wx:if="{{state===3}}"><text>{{"("+$root.g2+")"}}</text></block></view><view class="{{['border',typeClass,'bg-'+themeColor.name]}}"></view></view><view class="place"></view><view class="coupon-list"><block wx:if="{{$root.g3}}"><view data-event-opts="{{[['tap',[['emptyInvalidCoupon',['$event']]]]]}}" class="{{['empty-invalid','text-'+themeColor.name]}}" catchtap="__e">清空失效优惠券</view></block><view class="sub-list valid" style="{{'margin-top:'+(state===3?'50upx':0)+';'}}"><block wx:for="{{$root.l0}}" wx:for-item="row" wx:for-index="index" wx:key="index"><view class="row"><view class="carrier"><view class="left"><view class="in1line title"><text class="{{['cell-icon','bg-'+themeColor.name]}}">{{row.m0===2?'限':'全'}}</text>{{''+row.$orig.title+''}}</view><block wx:if="{{state!==2}}"><view class="term">{{''+row.f0+" ~ "+row.f1+''}}</view></block><block wx:else><view class="term">{{'使用时间：'+row.f2+''}}</view></block><block wx:if="{{state===3}}"><view class="overdue"><text class="{{['iconfont','iconyiguoqi2','text-'+themeColor.name]}}"></text></view></block><block wx:if="{{state===2}}"><view class="overdue"><text class="iconfont iconyishiyong"></text></view></block><view class="usage">{{''+(row.m1===0?'不限':'每人限领'+row.$orig.couponType.max_fetch)+"\n\t\t\t\t\t\t\t\t\t已领"+row.$orig.couponType.get_count+''}}<block wx:if="{{row.$orig.couponType.percentage}}"><text>{{"剩余"+row.$orig.couponType.percentage+"%"}}</text></block></view></view><view class="{{['right',state!==1?'invalid':'bg-'+themeColor.name]}}"><view class="ticket"><view class="num">{{''+(row.$orig.type==='1'?moneySymbol+row.$orig.money:row.$orig.discount/10+'折')+''}}</view></view><view class="criteria">{{'满'+row.$orig.at_least+'使用'}}</view><block wx:if="{{row.m2===2}}"><view data-event-opts="{{[['tap',[['show',['$0'],[[['couponList','',index]]]]]]]}}" class="{{['use','view','text-'+themeColor.name]}}" bindtap="__e">商品</view></block><block wx:if="{{state==1}}"><view data-event-opts="{{[['tap',[['navTo',['/pages/product/list']]]]]}}" class="{{['use','text-'+themeColor.name]}}" bindtap="__e">去使用</view></block><block wx:if="{{state==2}}"><view data-event-opts="{{[['tap',[['navTo',['/pages/order/detail?id='+row.$orig.use_order_id]]]]]}}" class="{{['use','text-'+themeColor.name]}}" bindtap="__e">去查看</view></block></view></view></view></block></view><block wx:if="{{$root.g4>0}}"><rf-load-more vue-id="6e511fe2-1" status="{{loadingType}}" bind:__l="__l"></rf-load-more></block></view></view><block wx:if="{{$root.g5}}"><rf-empty class="empty" vue-id="6e511fe2-2" info="暂无优惠券" bind:__l="__l"></rf-empty></block><uni-drawer class="rf-drawer" vue-id="6e511fe2-3" visible="{{showRight}}" mode="right" data-event-opts="{{[['^close',[['closeDrawer']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="{{['rf-drawer-title','text-'+themeColor.name]}}">可用商品列表</view><view class="rf-drawer-list"><block wx:for="{{$root.l1}}" wx:for-item="item" wx:for-index="__i0__" wx:key="id"><view data-event-opts="{{[['tap',[['navTo',['/pages/product/product?id='+item.$orig.id]]]]]}}" class="rf-drawer-item" bindtap="__e"><view class="left"><view class="title">{{item.g6}}</view><view class="desc in2line">{{item.g7[1]}}</view></view><text class="iconfont iconyou"></text></view></block></view><view class="close"><view class="{{['btn','bg-'+themeColor.name]}}" plain="true" size="small" type="primary" data-event-opts="{{[['tap',[['hide',['$event']]]]]}}" bindtap="__e">关闭</view></view></uni-drawer><rf-loading vue-id="6e511fe2-4" isFullScreen="{{true}}" active="{{loading}}" bind:__l="__l"></rf-loading></view>